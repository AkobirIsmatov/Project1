eval(atob('ZnVuY3Rpb24gYmxhY2tob2xlKGVsZW1lbnQpIHsKICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZWxlbWVudCk7CiAgICBjb25zdCBoID0gY29udGFpbmVyLm9mZnNldEhlaWdodDsKICAgIGNvbnN0IHcgPSBjb250YWluZXIub2Zmc2V0V2lkdGg7CiAgICBjb25zdCBjdyA9IHc7CiAgICBjb25zdCBjaCA9IGg7CiAgICBjb25zdCBtYXhvcmJpdCA9IDI1NTsgLy8gZGlzdGFuY2UgZnJvbSBjZW50ZXIKICAgIGNvbnN0IGNlbnRlcnkgPSBjaCAvIDI7CiAgICBjb25zdCBjZW50ZXJ4ID0gY3cgLyAyOwoKICAgIGNvbnN0IHN0YXJ0VGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpOwogICAgbGV0IGN1cnJlbnRUaW1lID0gMDsKCiAgICBjb25zdCBzdGFycyA9IFtdOwogICAgbGV0IGNvbGxhcHNlID0gZmFsc2U7IC8vIGlmIGhvdmVyZWQKICAgIGxldCBleHBhbnNlID0gZmFsc2U7IC8vIGlmIGNsaWNrZWQKICAgIGxldCByZXR1cm5pbmcgPSBmYWxzZTsgLy8gaWYgcGFydGljbGVzIGFyZSByZXR1cm5pbmcgdG8gb3JiaXQKCiAgICAvLyBDcmVhdGUgY2FudmFzCiAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTsKICAgIGNhbnZhcy53aWR0aCA9IGN3OwogICAgY2FudmFzLmhlaWdodCA9IGNoOwogICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGNhbnZhcyk7CiAgICBjb25zdCBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoIjJkIik7CgogICAgY29udGV4dC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSAibXVsdGlwbHkiOwoKICAgIGZ1bmN0aW9uIHNldERQSShjYW52YXMsIGRwaSkgewogICAgICAgIGlmICghY2FudmFzLnN0eWxlLndpZHRoKQogICAgICAgICAgICBjYW52YXMuc3R5bGUud2lkdGggPSBjYW52YXMud2lkdGggKyAncHgnOwogICAgICAgIGlmICghY2FudmFzLnN0eWxlLmhlaWdodCkKICAgICAgICAgICAgY2FudmFzLnN0eWxlLmhlaWdodCA9IGNhbnZhcy5oZWlnaHQgKyAncHgnOwoKICAgICAgICBjb25zdCBzY2FsZUZhY3RvciA9IGRwaSAvIDk2OwogICAgICAgIGNhbnZhcy53aWR0aCA9IE1hdGguY2VpbChjYW52YXMud2lkdGggKiBzY2FsZUZhY3Rvcik7CiAgICAgICAgY2FudmFzLmhlaWdodCA9IE1hdGguY2VpbChjYW52YXMuaGVpZ2h0ICogc2NhbGVGYWN0b3IpOwogICAgICAgIGNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpOwogICAgICAgIGN0eC5zY2FsZShzY2FsZUZhY3Rvciwgc2NhbGVGYWN0b3IpOwogICAgfQoKICAgIGZ1bmN0aW9uIHJvdGF0ZShjeCwgY3ksIHgsIHksIGFuZ2xlKSB7CiAgICAgICAgY29uc3QgcmFkaWFucyA9IGFuZ2xlOwogICAgICAgIGNvbnN0IGNvcyA9IE1hdGguY29zKHJhZGlhbnMpOwogICAgICAgIGNvbnN0IHNpbiA9IE1hdGguc2luKHJhZGlhbnMpOwogICAgICAgIGNvbnN0IG54ID0gKGNvcyAqICh4IC0gY3gpKSArIChzaW4gKiAoeSAtIGN5KSkgKyBjeDsKICAgICAgICBjb25zdCBueSA9IChjb3MgKiAoeSAtIGN5KSkgLSAoc2luICogKHggLSBjeCkpICsgY3k7CiAgICAgICAgcmV0dXJuIFtueCwgbnldOwogICAgfQoKICAgIHNldERQSShjYW52YXMsIDE5Mik7CgogICAgY2xhc3MgU3RhciB7CiAgICAgICAgY29uc3RydWN0b3IoKSB7CiAgICAgICAgICAgIGNvbnN0IHJhbmRzID0gW107CiAgICAgICAgICAgIHJhbmRzLnB1c2goTWF0aC5yYW5kb20oKSAqIChtYXhvcmJpdCAvIDIpICsgMSk7CiAgICAgICAgICAgIHJhbmRzLnB1c2goTWF0aC5yYW5kb20oKSAqIChtYXhvcmJpdCAvIDIpICsgbWF4b3JiaXQpOwogICAgICAgICAgICB0aGlzLm9yYml0YWwgPSAocmFuZHMucmVkdWNlKChwLCBjKSA9PiBwICsgYywgMCkgLyByYW5kcy5sZW5ndGgpOwogICAgICAgICAgICB0aGlzLnggPSBjZW50ZXJ4OwogICAgICAgICAgICB0aGlzLnkgPSBjZW50ZXJ5ICsgdGhpcy5vcmJpdGFsOwogICAgICAgICAgICB0aGlzLnlPcmlnaW4gPSBjZW50ZXJ5ICsgdGhpcy5vcmJpdGFsOwogICAgICAgICAgICB0aGlzLnNwZWVkID0gKE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDIuNSkgKyAxLjUpICogTWF0aC5QSSAvIDE4MDsKICAgICAgICAgICAgdGhpcy5yb3RhdGlvbiA9IDA7CiAgICAgICAgICAgIHRoaXMuc3RhcnRSb3RhdGlvbiA9IChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAzNjApICsgMSkgKiBNYXRoLlBJIC8gMTgwOwogICAgICAgICAgICB0aGlzLmlkID0gc3RhcnMubGVuZ3RoOwogICAgICAgICAgICB0aGlzLmNvbGxhcHNlQm9udXMgPSB0aGlzLm9yYml0YWwgLSAobWF4b3JiaXQgKiAwLjcpOwogICAgICAgICAgICBpZiAodGhpcy5jb2xsYXBzZUJvbnVzIDwgMCkgeyB0aGlzLmNvbGxhcHNlQm9udXMgPSAwOyB9CiAgICAgICAgICAgIHRoaXMuY29sb3IgPSAncmdiYSgyNTUsMjU1LDI1NSwnICsgKDEgLSAoKHRoaXMub3JiaXRhbCkgLyAyNTUpKSArICcpJzsKICAgICAgICAgICAgdGhpcy5ob3ZlclBvcyA9IGNlbnRlcnkgKyAobWF4b3JiaXQgLyAyKSArIHRoaXMuY29sbGFwc2VCb251czsKICAgICAgICAgICAgdGhpcy5leHBhbnNlUG9zID0gY2VudGVyeSArICh0aGlzLmlkICUgMTAwKSAqIC0xMCArIChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAyMCkgKyAxKTsKICAgICAgICAgICAgdGhpcy5wcmV2UiA9IHRoaXMuc3RhcnRSb3RhdGlvbjsKICAgICAgICAgICAgdGhpcy5wcmV2WCA9IHRoaXMueDsKICAgICAgICAgICAgdGhpcy5wcmV2WSA9IHRoaXMueTsKICAgICAgICAgICAgdGhpcy5vcmlnaW5hbFkgPSB0aGlzLnlPcmlnaW47CiAgICAgICAgICAgIHN0YXJzLnB1c2godGhpcyk7CiAgICAgICAgfQogICAgICAgIGRyYXcoKSB7CiAgICAgICAgICAgIGlmICghZXhwYW5zZSAmJiAhcmV0dXJuaW5nKSB7CiAgICAgICAgICAgICAgICB0aGlzLnJvdGF0aW9uID0gdGhpcy5zdGFydFJvdGF0aW9uICsgKGN1cnJlbnRUaW1lICogdGhpcy5zcGVlZCk7CiAgICAgICAgICAgICAgICBpZiAoIWNvbGxhcHNlKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMueSA+IHRoaXMueU9yaWdpbikgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnkgLT0gMi41OwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy55IDwgdGhpcy55T3JpZ2luIC0gNCkgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnkgKz0gKHRoaXMueU9yaWdpbiAtIHRoaXMueSkgLyAxMDsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHRoaXMudHJhaWwgPSAxOwogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnkgPiB0aGlzLmhvdmVyUG9zKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMueSAtPSAodGhpcy5ob3ZlclBvcyAtIHRoaXMueSkgLyAtNTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMueSA8IHRoaXMuaG92ZXJQb3MgLSA0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMueSArPSAyLjU7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgaWYgKGV4cGFuc2UgJiYgIXJldHVybmluZykgewogICAgICAgICAgICAgICAgdGhpcy5yb3RhdGlvbiA9IHRoaXMuc3RhcnRSb3RhdGlvbiArIChjdXJyZW50VGltZSAqICh0aGlzLnNwZWVkIC8gMikpOwogICAgICAgICAgICAgICAgaWYgKHRoaXMueSA+IHRoaXMuZXhwYW5zZVBvcykgewogICAgICAgICAgICAgICAgICAgIHRoaXMueSAtPSBNYXRoLmZsb29yKHRoaXMuZXhwYW5zZVBvcyAtIHRoaXMueSkgLyAtODA7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSBpZiAocmV0dXJuaW5nKSB7CiAgICAgICAgICAgICAgICB0aGlzLnJvdGF0aW9uID0gdGhpcy5zdGFydFJvdGF0aW9uICsgKGN1cnJlbnRUaW1lICogdGhpcy5zcGVlZCk7CiAgICAgICAgICAgICAgICBpZiAoTWF0aC5hYnModGhpcy55IC0gdGhpcy5vcmlnaW5hbFkpID4gMikgewogICAgICAgICAgICAgICAgICAgIHRoaXMueSArPSAodGhpcy5vcmlnaW5hbFkgLSB0aGlzLnkpIC8gNTA7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHRoaXMueSA9IHRoaXMub3JpZ2luYWxZOwogICAgICAgICAgICAgICAgICAgIHRoaXMueU9yaWdpbiA9IHRoaXMub3JpZ2luYWxZOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGNvbnRleHQuc2F2ZSgpOwogICAgICAgICAgICBjb250ZXh0LmZpbGxTdHlsZSA9IHRoaXMuY29sb3I7CiAgICAgICAgICAgIGNvbnRleHQuc3Ryb2tlU3R5bGUgPSB0aGlzLmNvbG9yOwogICAgICAgICAgICBjb250ZXh0LmJlZ2luUGF0aCgpOwogICAgICAgICAgICBjb25zdCBvbGRQb3MgPSByb3RhdGUoY2VudGVyeCwgY2VudGVyeSwgdGhpcy5wcmV2WCwgdGhpcy5wcmV2WSwgLXRoaXMucHJldlIpOwogICAgICAgICAgICBjb250ZXh0Lm1vdmVUbyhvbGRQb3NbMF0sIG9sZFBvc1sxXSk7CiAgICAgICAgICAgIGNvbnRleHQudHJhbnNsYXRlKGNlbnRlcngsIGNlbnRlcnkpOwogICAgICAgICAgICBjb250ZXh0LnJvdGF0ZSh0aGlzLnJvdGF0aW9uKTsKICAgICAgICAgICAgY29udGV4dC50cmFuc2xhdGUoLWNlbnRlcngsIC1jZW50ZXJ5KTsKICAgICAgICAgICAgY29udGV4dC5saW5lVG8odGhpcy54LCB0aGlzLnkpOwogICAgICAgICAgICBjb250ZXh0LnN0cm9rZSgpOwogICAgICAgICAgICBjb250ZXh0LnJlc3RvcmUoKTsKICAgICAgICAgICAgdGhpcy5wcmV2UiA9IHRoaXMucm90YXRpb247CiAgICAgICAgICAgIHRoaXMucHJldlggPSB0aGlzLng7CiAgICAgICAgICAgIHRoaXMucHJldlkgPSB0aGlzLnk7CiAgICAgICAgfQogICAgfQoKICAgIGNvbnN0IGNlbnRlckhvdmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNlbnRlckhvdmVyJyk7CiAgICBjZW50ZXJIb3Zlci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkgewogICAgICAgIGNvbGxhcHNlID0gZmFsc2U7CiAgICAgICAgZXhwYW5zZSA9IHRydWU7CiAgICAgICAgcmV0dXJuaW5nID0gZmFsc2U7CiAgICAgICAgdGhpcy5jbGFzc0xpc3QuYWRkKCdvcGVuJyk7CiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgIGV4cGFuc2UgPSBmYWxzZTsKICAgICAgICAgICAgcmV0dXJuaW5nID0gdHJ1ZTsKICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICByZXR1cm5pbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgIHRoaXMuY2xhc3NMaXN0LnJlbW92ZSgnb3BlbicpOwogICAgICAgICAgICB9LCA4MDAwKTsKICAgICAgICB9LCAyNTAwMCk7CiAgICB9KTsKICAgIGNlbnRlckhvdmVyLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3ZlcicsIGZ1bmN0aW9uKCkgewogICAgICAgIGlmIChleHBhbnNlID09PSBmYWxzZSkgewogICAgICAgICAgICBjb2xsYXBzZSA9IHRydWU7CiAgICAgICAgfQogICAgfSk7CiAgICBjZW50ZXJIb3Zlci5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW91dCcsIGZ1bmN0aW9uKCkgewogICAgICAgIGlmIChleHBhbnNlID09PSBmYWxzZSkgewogICAgICAgICAgICBjb2xsYXBzZSA9IGZhbHNlOwogICAgICAgIH0KICAgIH0pOwoKICAgIGxldCBhbmltYXRpb25JZDsKICAgIGZ1bmN0aW9uIGxvb3AoKSB7CiAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7CiAgICAgICAgY3VycmVudFRpbWUgPSAobm93IC0gc3RhcnRUaW1lKSAvIDUwOwogICAgICAgIGNvbnRleHQuZmlsbFN0eWxlID0gJ3JnYmEoMjUsMjUsMjUsMC4yKSc7CiAgICAgICAgY29udGV4dC5maWxsUmVjdCgwLCAwLCBjdywgY2gpOwogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RhcnMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgaWYgKHN0YXJzW2ldICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICAgIHN0YXJzW2ldLmRyYXcoKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBhbmltYXRpb25JZCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZShsb29wKTsKICAgIH0KCiAgICBmdW5jdGlvbiBpbml0KCkgewogICAgICAgIGNvbnRleHQuZmlsbFN0eWxlID0gJ3JnYmEoMjUsMjUsMjUsMSknOwogICAgICAgIGNvbnRleHQuZmlsbFJlY3QoMCwgMCwgY3csIGNoKTsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDI1MDA7IGkrKykgewogICAgICAgICAgICBuZXcgU3RhcigpOwogICAgICAgIH0KICAgICAgICBsb29wKCk7CiAgICB9CgogICAgaW5pdCgpOwogICAgcmV0dXJuICgpID0+IGNhbmNlbEFuaW1hdGlvbkZyYW1lKGFuaW1hdGlvbklkKTsKfQoKZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsICgpID0+IHsKICAgIGNvbnN0IGNhbmNlbEFuaW1hdGlvbiA9IGJsYWNraG9sZSgnI2JsYWNraG9sZScpOwogICAgY29uc3Qgb3ZlcmxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnRyby1vdmVybGF5Jyk7CiAgICBjb25zdCBtYWluID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21haW4tY29udGVudCcpOwogICAgY29uc3QgdHJpZ2dlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jZW50ZXJIb3ZlcicpOwogICAgdHJpZ2dlci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHsKICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgbWFpbi5jbGFzc0xpc3QuYWRkKCdzaG93Jyk7CiAgICAgICAgICAgIG92ZXJsYXkucmVtb3ZlKCk7CiAgICAgICAgICAgIGNhbmNlbEFuaW1hdGlvbigpOwogICAgICAgICAgICBpbml0TWF0cml4KCdtYXRyaXgtbGVmdCcpOwogICAgICAgICAgICBpbml0TWF0cml4KCdtYXRyaXgtcmlnaHQnKTsKICAgICAgICB9LCAxMDAwKTsKICAgIH0pOwp9KTsKCg=='));
